<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/api.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/api.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import axios from "axios";

// Js class to call API
class API {
  /**
   *
   * @param {number|string} userId
   */
  constructor(userId) {
    this.userId = userId;
    this.instance = axios.create({
      baseURL: "http://localhost:3000/",
      timeout: 1000,
      headers: {},
    });
  }

  /**
   * Get data
   * @param {('activity'|'average-sessions'|'performance')} [option]
   * @returns {Promise&lt;Object>} Fetched data
   */
  async get(option) {
    const optionsList = ["activity", "average-sessions", "performance"];

    return this.instance
      .get(`/user/${this.userId}/${optionsList.includes(option) ? option : ""}`)
      .then((res) => res.data);
  }

  /**
   * Get user info
   * @returns {Object}
   */
  async getUser() {
    const json = await this.get();
    return json.data.userInfos;
  }

  /**
   * Get user's activity
   * @returns {Object[]}
   */
  async getActivity() {
    const json = await this.get("activity");
    return json.data.sessions.map((d) => {
      return {
        ...d,
        day: d.day.substr(-1),
      };
    });
  }

  /**
   * Get user's average sessions
   * @returns {Object[]}
   */
  async getAverageSessions() {
    const json = await this.get("average-sessions");
    const week = ["L", "M", "M", "J", "V", "S", "D"];
    return json.data.sessions.map((d) => {
      return {
        ...d,
        day: week[d.day - 1],
      };
    });
  }

  /**
   * Get user's performance
   * @returns {object}
   */
  async getPerformance() {
    const json = await this.get("performance");
    const kind = json.data.kind;
    const kindFr = {
      cardio: "Cardio",
      energy: "Energie",
      endurance: "Endurance",
      strength: "Force",
      speed: "Vitesse",
      intensity: "IntensitÃ©",
    };

    Object.keys(kind).map((key) => {
      return (kind[key] = kindFr[kind[key]]);
    });

    return {
      data: json.data.data,
      kind,
    };
  }

  /**
   * Get user's score
   * @returns {number}
   */
  async getScore() {
    const json = await this.get();
    return json.data.todayScore;
  }

  /**
   * Get user's keyData
   * @returns {object}
   */
  async getKeyData() {
    const json = await this.get();
    return json.data.keyData;
  }
}

export default API;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="API.html">API</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CardInfo">CardInfo</a></li><li><a href="global.html#ChartBar">ChartBar</a></li><li><a href="global.html#ChartLine">ChartLine</a></li><li><a href="global.html#ChartRadar">ChartRadar</a></li><li><a href="global.html#ChartRadialBar">ChartRadialBar</a></li><li><a href="global.html#COLORS">COLORS</a></li><li><a href="global.html#transform">transform</a></li><li><a href="global.html#useAxios">useAxios</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Dec 03 2021 16:53:54 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
